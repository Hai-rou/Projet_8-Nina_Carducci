document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".gallery-container"),t=e.querySelector(".gallery"),n=e.querySelector(".tags-bar");if(!t||!n)return;const l=Array.from(t.querySelectorAll(".gallery-item")),a=new Set;function r(e,t=!1){const n=document.createElement("button");return n.textContent=e,n.dataset.filter=e,n.className="tag-button",t&&n.classList.add("active"),n}l.forEach((e=>{const t=e.dataset.galleryTag;t&&a.add(t)})),n.appendChild(r("Tous",!0)),a.forEach((e=>n.appendChild(r(e)))),n.addEventListener("click",(e=>{if("BUTTON"!==e.target.tagName)return;const t=e.target.dataset.filter;n.querySelectorAll("button").forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),function(e){l.forEach((t=>{const n=t.dataset.galleryTag;t.style.display="Tous"===e||e===n?"block":"none"}))}(t)})),t.style.display="grid";const o=document.getElementById("image-modal"),c=o.querySelector(".modal-img"),s=o.querySelector(".modal-prev"),d=o.querySelector(".modal-next"),i=document.getElementById("modal-overlay");let y=-1;function u(){return l.filter((e=>"none"!==e.style.display))}function g(e){const t=u();if(0===t.length)return;const n=t[e];n&&(c.src=n.src,c.alt=n.alt||"",o.style.display="flex",i.style.display="block",y=e)}function f(){o.style.display="none",i.style.display="none",c.src="",y=-1}function m(){const e=u();0!==e.length&&(y=(y+1)%e.length,g(y))}function E(){const e=u();0!==e.length&&(y=(y-1+e.length)%e.length,g(y))}l.forEach((e=>{e.addEventListener("click",(()=>{const t=u().indexOf(e);-1!==t&&g(t)}))})),i.addEventListener("click",f),d.addEventListener("click",m),s.addEventListener("click",E),document.addEventListener("keydown",(e=>{"flex"===o.style.display&&("Escape"===e.key&&f(),"ArrowRight"===e.key&&m(),"ArrowLeft"===e.key&&E())}))}));